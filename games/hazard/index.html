<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hazard Dice - Dak & Chog Tavern</title>
  <link rel="stylesheet" href="../../css/style.css">

  <!-- Ethers UMD (CSP-safe usage) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

  <!-- ABI as global -->
  <script src="HazardABI.js"></script>

  <style>
    /* small isolated tweaks so the dice layout looks correct in the tavern card */
    .dice-row { display:flex; justify-content:center; gap:16px; margin:18px 0; }
    .dice {
      width:96px; height:96px; display:flex; align-items:center; justify-content:center;
      font-size:48px; border-radius:12px; background: rgba(255,255,255,0.06);
      box-shadow: inset 0 2px 0 rgba(255,255,255,0.03);
    }
    .dice.shake { animation: shake 0.6s ease; }
    @keyframes shake {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(-18deg); }
      50% { transform: rotate(18deg); }
      75% { transform: rotate(-8deg); }
      100% { transform: rotate(0deg); }
    }

    .controls { display:flex; gap:12px; align-items:center; justify-content:center; margin-bottom:12px; }
    .rules { font-size:13px; color:#2b1e12; text-align:left; background: rgba(255,255,255,0.06); padding:10px; border-radius:8px; margin:12px auto; width:90%; max-width:560px; }
    .main-select button { padding:8px 12px; margin-right:6px; border-radius:8px; cursor:pointer; }
    .main-select button.active { background:#8b5a2b; color:white; }
  </style>
</head>
<body>
  <div class="tavern" style="max-width:760px; margin:28px auto;">
    <h1>Hazard Dice</h1>

    <div class="rules">
      <strong>Rules (contract):</strong>
      <ol>
        <li>Choose a <em>main</em> between <strong>5</strong> and <strong>9</strong>.</li>
        <li>Place a wager and click <strong>Roll Dice</strong>. The contract rolls two dice until a result is reached.</li>
        <li>First roll:
          <ul>
            <li>If roll == main â†’ immediate win.</li>
            <li>If roll == 2 or 3 â†’ immediate loss.</li>
            <li>If roll == 11 or 12: â€” if main is 5 or 9 â†’ win; if main is 7 â†’ lose; otherwise lose.</li>
            <li>Otherwise the roll becomes the <em>chance</em> (a point) and subsequent rolls repeat until the chance or main resolves the game.</li>
          </ul>
        </li>
        <li>If you win the contract attempts to pay 2Ã— your wager (contract must have bankroll).</li>
      </ol>
    </div>

    <div class="controls">
      <div class="main-select" aria-label="Choose main">
        <label>Main:</label>
        <button data-main="5">5</button>
        <button data-main="6">6</button>
        <button data-main="7" class="active">7</button>
        <button data-main="8">8</button>
        <button data-main="9">9</button>
      </div>

      <div>
        <label>Bet (MON)</label><br>
        <input id="bet" type="number" min="0.001" step="0.001" value="0.01" style="width:110px; text-align:center;">
      </div>
    </div>

    <div class="dice-row">
      <div id="dice1" class="dice">âš€</div>
      <div id="dice2" class="dice">âš€</div>
    </div>

    <div style="text-align:center; margin-bottom:12px;">
      <button id="roll-dice" style="padding:10px 18px; font-size:16px;">ðŸŽ² Roll Dice</button>
    </div>

    <div id="status" style="min-height:28px; text-align:center;"></div>

    <div style="text-align:center; margin-top:10px;">
      <button id="return">Return to Tavern</button>
    </div>

    <div class="scoreboard" style="margin-top:18px;">
      <h3>Recent Rolls</h3>
      <ul id="rolls"></ul>
    </div>
  </div>

  <script src="hazard.js"></script>
</body>
</html>
