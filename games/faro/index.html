<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Faro (On-chain) - The Dak and Chog Tavern</title>
  <link rel="stylesheet" href="../../css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script type="module" src="../../js/tavern.js"></script>
  <script src="../../js/FaroABI.js"></script>
  <style>
    body { background: url('../../assets/images/tavern-bg.png') no-repeat center center fixed; background-size: cover; }
    .tavern { padding-top: clamp(100px, 16vw, 180px); }
    .rank-grid { display:grid; grid-template-columns: repeat(13, minmax(34px, 1fr)); gap:6px; justify-items:center; }
    .rank-grid button { padding:6px 8px; cursor:pointer; }
    .cta { text-align:center; margin-top:10px; }
  </style>
  <link rel="icon" type="image/png" href="/assets/images/dakandchog-logo.png">
  <meta name="description" content="On-chain Faro with small rake each round.">
</head>
<body class="game">
  <div class="top-banner" role="region" aria-label="Wallet and status">
    <div class="banner-left">
      <button id="return" class="return-btn">Return to Tavern</button>
      <div id="status" class="banner-status"></div>
    </div>
    <div class="banner-right">
      <div class="controls">
        <button id="connect-wallet">Connect Wallet</button>
      </div>
    </div>
  </div>

  <div class="tavern" style="position:relative; margin:clamp(160px, 12vw, 260px) auto 28px; width:95%; max-width:1000px;">
    <h1 class="visually-hidden">Faro (On-chain)</h1>
    <img class="game-logo" src="../../assets/images/faro-logo.png" alt="Faro">

    <div style="background:rgba(255,244,233,0.92); border:4px solid #7800cd; border-radius:12px; padding:16px; color:#2b1e12;">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap;">
        <p style="margin:0;">Choose a rank (Ace=1 … King=13), enter your wager, and play. A small rake applies each round.</p>
        <button id="open-rules">Rules</button>
      </div>
      <div class="rank-grid" id="rank-grid" aria-label="Ranks 1 to 13"></div>
      <div class="controls" style="margin-top:10px; display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap;">
        <label>Bet</label>
        <input id="bet" type="number" min="0.001" step="0.001" value="0.01" style="width:120px; text-align:center;">
        <button id="play">Play</button>
        <div id="faro-status" style="min-height:28px; text-align:center;"></div>
      </div>
    </div>
  </div>

  <!-- Faro Rules (reference) -->
  <div id="rules-overlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:9999;">
    <div style="background:rgba(255,244,233,0.96); border:4px solid #7800cd; border-radius:12px; padding:16px; width:min(92vw, 820px); max-height:90vh; overflow:auto; color:#2b1e12;">
      <h2 style="margin-top:0;">Faro (On-chain) Rules</h2>
      <ul>
        <li>Pick a rank 1–13 (Ace=1 … King=13) and place a wager.</li>
        <li>The house draws two ranks: bankRank then playerRank.</li>
        <li>If your rank == bankRank: lose; if your rank == playerRank: win 1:1 on (wager − rake).</li>
        <li>If bankRank == playerRank (doublet): push — (wager − rake) is refunded.</li>
        <li>Rake: a small fee (in basis points) is taken each round and kept by the house.</li>
      </ul>
      <div style="text-align:right; margin-top:8px;"><button id="rules-ack">Close</button></div>
    </div>
  </div>

  <script type="module" src="./faro.js"></script>
</body>
</html>

